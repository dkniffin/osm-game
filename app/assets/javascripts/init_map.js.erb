$(document).ready(function(){
  // Set up the map
  // App.map = L.mapbox.map('map', 'oddityoverseer13.map-y6b598y4').setView([35.992591, -78.903991], 20);
  L.mapbox.accessToken = 'pk.eyJ1Ijoib2RkaXR5b3ZlcnNlZXIxMyIsImEiOiIwTEp5a1JnIn0.kzeYyqB2YOj2XXXECKKnJg';
  App.map = L.mapbox.map('map').setView([35.992591, -78.903991], 20);
  L.mapbox.styleLayer('mapbox://styles/oddityoverseer13/ciju0qw2900073slwb1yxdi25').addTo(App.map);

  App.icons = {}
  App.icons.zombieIcon = L.icon({
    iconUrl: '<%= asset_data_uri "zombie.png" %>',
    iconSize:     [16, 16], // size of the icon
    iconAnchor:   [8, 9], // point of the icon which will correspond to marker's location
  });
  App.icons.characterIcon = L.icon({
    iconUrl: '<%= asset_data_uri "character.png" %>',
    iconSize:     [24, 24], // size of the icon
    iconAnchor:   [12, 12], // point of the icon which will correspond to marker's location
  });


  App.map.on('contextmenu', function(e) {
    selected = App.game.selected
    App.characters.move(selected.data.id, e.latlng)
  })

  App.map.on('click', function(e) {
    App.game.selected.unselect();
  })
})
